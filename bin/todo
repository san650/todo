#!/usr/bin/env bash

COMMAND="$1"
shift

FILE="$HOME/.todo"

function print_all
{
  cat -n $FILE
}

case $COMMAND in
  "")
    print_all
    ;;
  add)
    MESSAGE="$@"
    echo "- [ ] $MESSAGE" >> $FILE
    ;;
  list)
    print_all
    ;;
  "done")
    sed -i '' "$1s/\[ \]/[x]/" $FILE
    ;;
  undone)
    sed -i '' "$1s/\[x\]/[ ]/" $FILE
    ;;
  filter)
    print_all | grep "$1"
    ;;
  *)
    echo "Error: command '$COMMAND' unknown

    Usage:
        todo add [message]
        todo list
        todo done [n]
        todo undone [n]"
    exit 1
    ;;
esac
